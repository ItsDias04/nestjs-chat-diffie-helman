# Profile Component

## Описание
Компонент профиля пользователя для Angular приложения ChatDiffieHelman. Позволяет просматривать и редактировать информацию о текущем пользователе.

## Возможности
- ✅ Просмотр информации профиля (имя, email, ID)
- ✅ Редактирование данных профиля
- ✅ Валидация форм (минимум 2 символа для имени, корректный email)
- ✅ Автоматическая генерация аватара с инициалами
- ✅ Загрузка данных из localStorage и с сервера
- ✅ Обработка состояний загрузки и ошибок
- ✅ Responsive дизайн
- ✅ Навигация к чатам

## Структура файлов
```
src/app/pages/profile/
├── profile.component.ts      # Логика компонента
├── profile.component.html    # Шаблон
└── profile.component.css     # Стили
```

## Использование

### Навигация к компоненту
Компонент доступен по маршруту `/profile`. В навигационной панели уже есть ссылка на профиль.

### Запуск dev-сервера
```powershell
npm start
```

Затем откройте браузер и перейдите по адресу:
```
http://localhost:4200/profile
```

## Функционал

### Просмотр профиля
По умолчанию компонент отображает информацию в режиме только для чтения:
- Аватар с инициалами (автоматически генерируется из имени)
- Имя пользователя
- ID пользователя
- Email

### Редактирование профиля
1. Нажмите кнопку "Редактировать"
2. Измените поля имени и/или email
3. Нажмите "Сохранить" для применения изменений
4. Или нажмите "Отмена" для отмены редактирования

### Валидация
- **Имя**: минимум 2 символа
- **Email**: корректный формат email адреса

## Интеграция с API

### Текущая реализация
Компонент использует `UsersService` для:
- Получения данных профиля через `getMe()`
- Сохранения в localStorage

### Будущие улучшения
Для полной работы с backend API необходимо добавить в `ProfileService` или `UsersService`:

```typescript
updateProfile(userId: string, data: Partial<User>) {
  return this.http.put<User>(`${this.baseApiUrl}/users/${userId}`, data);
}
```

Затем в `ProfileComponent.onSubmit()` заменить:
```typescript
// Вместо симуляции сохранения
this.usersService.saveToLocalStorage(updatedUser);

// Использовать API запрос
this.profileService.updateProfile(this.currentUser!.id, {
  name: this.profileForm.value.name,
  email: this.profileForm.value.email
}).subscribe({
  next: (user) => {
    this.currentUser = user;
    this.usersService.saveToLocalStorage(user);
    this.saveMessage = 'Профиль успешно обновлён!';
    this.isEditMode = false;
  },
  error: (err) => {
    this.saveMessage = 'Ошибка при сохранении профиля';
  }
});
```

## Зависимости
- `@angular/common` - CommonModule
- `@angular/forms` - ReactiveFormsModule
- `@angular/router` - Router
- `UsersService` - для работы с данными пользователя

## Стилизация
Компонент использует:
- Градиентный фон
- Карточный дизайн с тенями
- Адаптивную верстку (responsive)
- Анимации при hover
- Цветовую схему приложения (#7d173f)

## Примеры состояний

### Загрузка
Отображается спиннер с текстом "Загрузка профиля..."

### Ошибка
Показывается сообщение об ошибке с кнопкой "Повторить попытку"

### Успешное сохранение
Зелёное сообщение "Профиль успешно обновлён!" (исчезает через 3 секунды)

## Адаптивность
Компонент полностью адаптируется под мобильные устройства:
- На экранах меньше 768px кнопки размещаются вертикально
- Уменьшается размер аватара
- Адаптируются отступы

## TODO / Возможные улучшения
- [ ] Добавить возможность загрузки фото профиля
- [ ] Добавить смену пароля
- [ ] Добавить подтверждение email
- [ ] Добавить двухфакторную аутентификацию
- [ ] Добавить историю изменений профиля
- [ ] Добавить настройки приватности
- [ ] Интегрировать с реальным API для обновления профиля

## Автор
Создано для проекта ChatDiffieHelman
