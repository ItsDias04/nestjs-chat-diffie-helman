<div class="chat-window">
<div class="chat-main">
<header class="chat-header">
<div class="chat-title">Chat: {{ chatName || 'Чат' }}</div>
<div class="chat-actions">
<!-- <button class="icon-btn" title="Инфо">i</button> -->
</div>
</header>


<div class="messages" role="log" aria-live="polite">
<div class="message" *ngFor="let m of messages; trackBy: trackByMessage"
[class.mine]="m.userId === 'me'">
<!-- <div class="avatar">{{ m. ? m.authorName.charAt(0).toUpperCase() : '?' }}</div> -->
<div class="bubble">
<div class="meta"><span class="author">{{ m.user.username }}</span>
<span class="time">{{ m.timestamp| date:'shortTime' }}</span>
</div>
<div class="text">{{ m.content }}</div>
</div>
</div>
</div>


<div class="composer">
<textarea [(ngModel)]="newMessage" placeholder="Написать сообщение..." rows="1"></textarea>
<button class="send-btn" (click)="send()" [disabled]="!newMessage.trim()">Отправить</button>
</div>
</div>


<aside class="chat-users">
<div class="users-header"><p>Пользователи</p><button (click)="openInviteModal()" class="send-btn">Пригласить</button></div>
<!-- <input class="users-search" placeholder="Поиск..." /> -->
<ul class="users-list">
<li *ngFor="let u of users$ | async; trackBy: trackByUser" class="user-item">
<div class="avatar">{{ u.username?.charAt(0)?.toUpperCase() }}</div>
<div class="user-info">
<div class="username">{{ u.username }}</div>
<div class="email">{{ u.email }}</div>
</div>
</li>
</ul>
</aside>
</div>